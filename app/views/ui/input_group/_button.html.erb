<%# InputGroupButton - shadcn/ui inspired component for Rails %>
<%
  content ||= local_assigns.fetch(:content, nil)
  @size = local_assigns.fetch(:size, "xs")
  @variant = local_assigns.fetch(:variant, "ghost")
  @type = local_assigns.fetch(:type, "button")
  @classes = local_assigns.fetch(:classes, "")
  @attributes = local_assigns.fetch(:attributes, {})

  # Extend behavior for shared logic
  extend UI::InputGroupButtonBehavior

  # Get base attributes from behavior (type, variant, classes)
  base_attrs = input_group_button_attributes

  # Extract button-specific params that ui/button accepts as direct arguments
  button_params = {
    type: base_attrs[:type],
    variant: base_attrs[:variant],
    classes: base_attrs[:classes]
  }

  # Merge additional HTML attributes (data, role, aria, tabindex, etc.) into attributes hash
  html_attrs = @attributes.except(:type, :variant, :classes)
  button_params[:attributes] = html_attrs unless html_attrs.empty?
-%>
<%= render "ui/button", **button_params do %>
  <%= content || yield %>
<% end %>
