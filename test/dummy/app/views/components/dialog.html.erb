<div class="container py-8">
  <div class="space-y-8">
    <h1 class="text-4xl font-bold">Dialog</h1>
    <p class="text-muted-foreground">
      A window overlaid on either the primary window or another dialog window, rendering the content underneath inert.
    </p>

    <!-- Default Dialog -->
    <div class="space-y-4">
      <h2 class="text-2xl font-semibold">Default</h2>
      <p class="text-muted-foreground text-sm">
        A basic dialog with form fields. Uses default button trigger (without asChild).
      </p>

      <%= render UI::Dialog::Dialog.new(open: false, close_on_escape: true, close_on_overlay_click: true) do %>
        <%= render UI::Dialog::Trigger.new do %>
          Edit Profile
        <% end %>

        <%= render UI::Dialog::Overlay.new(open: false) do %>
          <%= render UI::Dialog::Content.new(classes: "sm:max-w-[425px]") do %>
            <%= render UI::Dialog::Header.new do %>
              <%= render UI::Dialog::Title.new do %>
                Edit profile
              <% end %>
              <%= render UI::Dialog::Description.new do %>
                Make changes to your profile here. Click save when you're done.
              <% end %>
            <% end %>

            <div class="grid gap-4 py-4">
              <div class="grid grid-cols-4 items-center gap-4">
                <label for="name" class="text-right text-sm font-medium">Name</label>
                <input id="name" type="text" value="Pedro Duarte" class="col-span-3 flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm shadow-xs transition-all file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50" />
              </div>
              <div class="grid grid-cols-4 items-center gap-4">
                <label for="username" class="text-right text-sm font-medium">Username</label>
                <input id="username" type="text" value="@peduarte" class="col-span-3 flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm shadow-xs transition-all file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 disabled:cursor-not-allowed disabled:opacity-50" />
              </div>
            </div>

            <%= render UI::Dialog::Footer.new do %>
              <%= render UI::Dialog::Close.new(variant: :default) do %>
                Save changes
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    </div>

    <!-- asChild Composition -->
    <div class="space-y-4">
      <h2 class="text-2xl font-semibold">Composition with asChild</h2>
      <p class="text-muted-foreground text-sm">
        Using <code class="px-1 py-0.5 rounded bg-muted text-sm">as_child: true</code> to compose with custom Button component. No wrapper div!
      </p>

      <%= render UI::Dialog::Dialog.new(open: false) do %>
        <%= render UI::Dialog::Trigger.new(as_child: true) do |trigger_attrs| %>
          <%= render UI::Button::Button.new(**trigger_attrs, variant: :outline) do %>
            Open with asChild
          <% end %>
        <% end %>

        <%= render UI::Dialog::Overlay.new(open: false) do %>
          <%= render UI::Dialog::Content.new do %>
            <%= render UI::Dialog::Header.new do %>
              <%= render UI::Dialog::Title.new do %>
                asChild Composition
              <% end %>
              <%= render UI::Dialog::Description.new do %>
                This dialog was opened using asChild composition. The trigger button has no wrapper element - Stimulus attributes were merged directly into the Button component!
              <% end %>
            <% end %>

            <div class="py-4">
              <p class="text-sm">Inspect the DOM and you'll see the trigger button has <code class="px-1 py-0.5 rounded bg-muted text-xs">data-action="click->ui--dialog#open"</code> merged with Button's classes, all in a single element.</p>
            </div>

            <%= render UI::Dialog::Footer.new do %>
              <%= render UI::Dialog::Close.new do %>
                Got it!
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    </div>

    <!-- Custom Width Dialog -->
    <div class="space-y-4">
      <h2 class="text-2xl font-semibold">Custom Width</h2>
      <p class="text-muted-foreground text-sm">
        You can customize the width of the dialog using Tailwind classes.
      </p>

      <%= render UI::Dialog::Dialog.new(open: false) do %>
        <%= render UI::Dialog::Trigger.new(as_child: true) do |trigger_attrs| %>
          <%= render UI::Button::Button.new(**trigger_attrs, variant: :outline) do %>
            View Details
          <% end %>
        <% end %>

        <%= render UI::Dialog::Overlay.new(open: false) do %>
          <%= render UI::Dialog::Content.new(classes: "sm:max-w-[725px]") do %>
            <%= render UI::Dialog::Header.new do %>
              <%= render UI::Dialog::Title.new do %>
                Share this document
              <% end %>
              <%= render UI::Dialog::Description.new do %>
                Anyone with the link can view this document.
              <% end %>
            <% end %>

            <div class="space-y-4 py-4">
              <div class="space-y-2">
                <label class="text-sm font-medium">Link</label>
                <div class="flex items-center gap-2">
                  <input type="text" value="https://ui.shadcn.com/docs/installation" readonly class="flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm" />
                  <%= render UI::Button::Button.new(variant: :outline, size: :sm) do %>
                    Copy
                  <% end %>
                </div>
              </div>
            </div>

            <%= render UI::Dialog::Footer.new do %>
              <%= render UI::Dialog::Close.new do %>
                Close
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    </div>

    <!-- No Overlay Click Dialog -->
    <div class="space-y-4">
      <h2 class="text-2xl font-semibold">Prevent Outside Click</h2>
      <p class="text-muted-foreground text-sm">
        This dialog only closes via the close button or Escape key.
      </p>

      <%= render UI::Dialog::Dialog.new(open: false, close_on_overlay_click: false) do %>
        <%= render UI::Button::Button.new(variant: :destructive, data: { action: "click->ui--dialog#open" }) do %>
          Delete Account
        <% end %>

        <%= render UI::Dialog::Overlay.new(open: false) do %>
          <%= render UI::Dialog::Content.new do %>
            <%= render UI::Dialog::Header.new do %>
              <%= render UI::Dialog::Title.new do %>
                Are you sure?
              <% end %>
              <%= render UI::Dialog::Description.new do %>
                This action cannot be undone. You must explicitly confirm or cancel.
              <% end %>
            <% end %>

            <%= render UI::Dialog::Footer.new do %>
              <%= render UI::Dialog::Close.new(variant: :outline) do %>
                Cancel
              <% end %>
              <%= render UI::Dialog::Close.new(variant: :destructive) do %>
                Delete
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
